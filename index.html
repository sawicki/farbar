<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">

  <title>FAR/BAR As Is </title>
  <meta name="description" content="HTML5 Template">
  <meta name="author" content="Felix Sawicki">

  <!-- <link rel="stylesheet" href="css/styles.css?v=1.0"> -->
  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <style>
    b.right {
      float: right;
    }

    .trbot {
      position: absolute;
      right: 20px;
      bottom: 20px;
    }

    #container {
      margin: 0 auto;
      width: 825px;
      position: relative;
      background-color: linen;
      border: 1px solid black;
      padding: 25px;
      word-wrap: break-word;
      overflow: auto;
      border-radius: 15px;
      box-shadow: 10px 10px 5px black;
    }

    button {
      margin-left: 20px;
    }

    h1 {
      color: maroon;
      margin-left: 40px;
    }

    h2 {
      text-align: center;
    }

    footer {
      text-align: center;
    }

    .formLayout,
    .outForm {
      background-color: #f3f3f3;
      border: solid 1px #a1a1a1;
      padding: 10px;
      width: 350px;
      margin: 20px;
    }

    .formLayout {
      float: left;
    }

    .formLayout label,
    .formLayout input {
      display: block;
      width: 160px;
      float: left;
      margin-bottom: 10px;
    }

    .finance {
      border-top: solid 1px black;
    }

    .formLayout label {
      text-align: right;
      padding-right: 20px;
    }

    br {
      clear: left;
    }

    body {
      margin: 25px auto 0 auto;
      background-color: #777;
    }

    h3 {
      text-align: center;
    }
  </style>
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>
  <div id=container>

    <h2>Fl FAR/BAR As Is Date Calculator</h2>
    <!-- <p>Start Date:

    </p>
    <input type="radio" name="endDate" value="male">Pick closing date by calendar
    <br>
    <input type="radio" name="endDate" value="female">Pick number of days until closing
    <br> -->
    <!-- <p id="secDate">Date Until:

    </p>
    <p># of Days:

      <br> -->
    <button onclick="processForm()">Process form</button>
    <br>

    <div class="formLayout">
      <!-- <fieldset>
  <legend>Input:</legend> -->
      <strong>Input:</strong>
      <br>
      <br>
      <label>Pick Exec Date</label>
      <input type="text" id="inExecFld">

      <label>Pick Close Date - L52</label>
      <input type="text" id="inCloseFld">

      <br>
      <label>Escrow Due - L29</label>
      <input id="inEscrowFld" placeholder="Days to Escrow" value="3">
      <br>
      <label>Fin Contingency - L96</label>
      <input id="inFinConFld" placeholder="Fin Contingincy" value="45">
      <br>
      <label>Fin application - L101</label>
      <input id="inFinAppFld" placeholder="Days Fin Appliation" value="5">
      <br>
      <label>Title Evidence - L147</label>
      <input id="inTitleFld" placeholder="Title Evid" value="-5">
      <br>
      <label>Inspect Contin - L247</label>
      <input id="inInspectFld" placeholder="Days for Inspection" value="15">
      <br>
      <label>Other</label>
      <input id="inOtherFld">
      <br>
      <!-- </fieldset> -->
    </div>


    <div class="formLayout">
      <strong>Output:</strong>
      <br>
      <br>
      <label>Exec to Close</label>
      <input type="text" id="outDaysFld" readonly>
      <label>Contract Executed</label>
      <input id="outExecFld" readonly>
      <label>Closing Date</label>
      <input id="outCloseFld" readonly>
      <label>Escrow Due</label>
      <input id="outEscrowFld" readonly>
      <label>Inspection</label>
      <input id="outInspectFld" readonly>
      <label>Finance Application</label>
      <input id="outFinAppFld" readonly>

      <label>Finance Contingincy</label>
      <input id="outFinConFld" readonly>
      <label>Fin Cont Waived - L112</label>
      <input id="outFinWaiveFld" readonly>

      <label>Title Evidence Due</label>
      <input id="outTitleFld" readonly>
      <label>Other</label>
      <input id="outOtherFld" readonly>


    </div>
    <footer>

      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
        <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" />
      </a>
      <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>

      <script>
        var localAvailable;
        var inExecFld = document.getElementById("inExecFld");
        var inEscrowFld = document.getElementById("inEscrowFld");
        var inFinConFld = document.getElementById("inFinConFld");
        var inFinAppFld = document.getElementById("inFinAppFld");
        var inTitleFld = document.getElementById("inTitleFld");
        var inInspectFld = document.getElementById("inInspectFld");
        var inOtherFld = document.getElementById("inOtherFld");

        var outDaysFld = document.getElementById("outDaysFld");
        var outExecFld = document.getElementById("outExecFld");
        var outCloseFld = document.getElementById("outCloseFld");
        var outEsrowFld = document.getElementById("outEsrowFld");
        var outInspectFld = document.getElementById("outInspectFld");
        var outFinAppFld = document.getElementById("outFinAppFld");
        var outFinConFld = document.getElementById("outFinConFld");
        var outFinWaiveFld = document.getElementById("outFinWaiveFld");
        var outTitleFld = document.getElementById("outTitleFld");
        var outOtherFld = document.getElementById("outOtherFld");

        $("#inExecFld").datepicker();
        $("#inCloseFld").datepicker();
        if (typeof(Storage) !== "undefined") {
          localAvailable = true;
        } else {
          localAvailable = false;
          // set message to indicate not available
        }

        function processForm() {
          var inExecStr = inExecFld.value;
          var inCloseStr = inCloseFld.value;
          var inExecDate = new Date(inExecStr);
          var inCloseDate = new Date(inCloseStr);

          // alert("dates picked are " + date1 + "  and  " + inCloseFld);
          outDaysFld.value = dateDif(inCloseDate, inExecDate);

          outExecFld.value = inExecDate.toDateString();
          outCloseFld.value = inCloseDate.toDateString();
          satSun(inCloseDate.toDateString(), outCloseFld);
          addDays(inExecStr, inEscrowFld.value, outEscrowFld);
          addDays(inExecStr, inFinConFld.value, outFinConFld);
          addDays(inExecStr, inFinAppFld.value, outFinAppFld);
          addDays(inCloseStr, "-7", outFinWaiveFld);
          addDays(inExecStr, inInspectFld.value, outInspectFld);
          addDays(inCloseStr, inTitleFld.value, outTitleFld);

          addDays(inExecStr, inOtherFld.value, outOtherFld);
          // var wd = newDate.split(/[\s+]/);
          // if (wd[0] == "Sun" ||
          //   wd[0] == "Sat") {
          //   document.getElementById("outClose").style.background = "pink";

        }



        // newDate = (daystoDate(inClose, "-7")).toDateString();
        // document.getElementById("outFinWaive").value = newDate;
        // wd = newDate.split(/[\s+]/);
        // if (wd[0] == "Sun" ||
        //   wd[0] == "Sat") {
        //   document.getElementById("outFinWaive").style.background = "pink";
        //
        // }




        function dateDif(date2, date1) {

          var oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
          // var firstDate = new Date(2008,01,12);
          // var secondDate = new Date(2008,01,22);

          var diffDays = Math.round(Math.abs((date2.getTime() - date1.getTime()) / (oneDay)));
          return diffDays;
          // alert(diffDays);
        }

        function daystoDate(date, days) {
          // body...
          var newdate = new Date(date);
          newdate.setDate(parseInt(newdate.getDate()) + parseInt(days));
          var nd = new Date(newdate);
          return nd;

        }

        function addDays(indate, dayString, outPutField) {
          var newDate = new Date(indate);
          newDate.setDate(parseInt(newDate.getDate()) + parseInt(dayString));
          var nd = (new Date(newDate)).toDateString();

          outPutField.value = nd;
          satSun(nd, outPutField);
          return;

        }

        // function daystoDate2(dateField, daysField, outputField) {
        //   // body...
        //   var newdate = new Date(document.getElementById(dateField).value);
        //   var days = document.getElementById(daysField).value;
        //   newdate.setDate(parseInt(newdate.getDate()) + parseInt(days));
        //
        //
        //   }

        function satSun(nd, outField) {
          // var nd = outField.value;
          var wd = (nd.split(/[\s+]/))[0];
          if (wd == "Sun" ||
            wd == "Sat") {
            outField.style.background = "pink";
            return;
        }else{
            outField.style.background = "#FFFFFF";
        }




        }
      </script>
      <!-- <script src="js/scripts.js"></script> -->
      <script>
        // put inline javascript here
      </script>
</body>

</html>
