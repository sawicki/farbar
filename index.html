<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">

  <title>FAR/BAR As Is </title>
  <meta name="description" content="HTML5 Template">
  <meta name="author" content="Felix Sawicki">

  <!-- <link rel="stylesheet" href="css/styles.css?v=1.0"> -->
  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <style>
    b.right {
      float: right;
    }

    .trbot {
      position: absolute;
      right: 20px;
      bottom: 20px;
    }

    #container {
      margin: 0 auto;
      width: 825px;
      position: relative;
      background-color: linen;
      border: 1px solid black;
      padding: 25px;
      word-wrap: break-word;
      overflow: auto;
      border-radius: 15px;
      box-shadow: 10px 10px 5px black;
    }

    button {
      margin-left: 20px;
    }

    h1 {
      color: maroon;
      margin-left: 40px;
    }

    h2 {
      text-align: center;
    }

    footer {
      text-align: center;
    }

    .formLayout,
    .outForm {
      background-color: #f3f3f3;
      border: solid 1px #a1a1a1;
      padding: 10px;
      width: 350px;
      margin: 20px;
    }

    .formLayout {
      float: left;
    }

    .formLayout label,
    .formLayout input {
      display: block;
      width: 160px;
      float: left;
      margin-bottom: 10px;
    }

    .formLayout label {
      text-align: right;
      padding-right: 20px;
    }

    br {
      clear: left;
    }

    body {
      margin: 25px auto 0 auto;
      background-color: #777;
    }

    h3 {
      text-align: center;
    }
  </style>
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>
  <div id=container>

    <h2>Fl FAR/BAR As Is Date Calculator</h2>
    <!-- <p>Start Date:

    </p>
    <input type="radio" name="endDate" value="male">Pick closing date by calendar
    <br>
    <input type="radio" name="endDate" value="female">Pick number of days until closing
    <br> -->
    <!-- <p id="secDate">Date Until:

    </p>
    <p># of Days:

      <br> -->
    <button onclick="processForm()">Process form</button>
    <br>

    <div class="formLayout">
      <!-- <fieldset>
  <legend>Input:</legend> -->
      <strong>Input:</strong>
      <br>
      <br>
      <label>Pick Exec Date</label>
      <input type="text" id="execDate">

      <label>Pick Close Date - L52</label>
      <input type="text" id="closeDate">

      <br>
      <label>Escrow Due - L29</label>
      <input id="escrowDays" placeholder="Days to Escrow" value="3">
      <br>
      <label>Fin Contingency - L96</label>
      <input id="daysFinance" placeholder="Fin Contingincy" value="45">
      <br>
      <label>Fin application - L101</label>
      <input id="finApplication" placeholder="Days for Appraisel" value="5">
      <br>
      <label>Title Evidence - L147</label>
      <input id="daysTitleEvid" placeholder="Title Evid" value="-5">
      <br>
      <label>Inspect Contin - L247</label>
      <input id="inspectDays" placeholder="Days for Inspection" value="15">
      <br>
      <label>Other</label>
      <input id="otherDays">
      <br>
      <!-- </fieldset> -->
    </div>


    <div class="formLayout">
      <strong>Output:</strong>
      <br>
      <br>
      <label>Exec to Close</label>
      <input type="text" id="numDays" readonly>
      <label>Contract Executed</label>
      <input id="execOut" readonly>
      <label>Closing Date</label>
      <input id="closeOut" readonly>
      <label>Escrow Due</label>
      <input id="escrowDate" readonly>
      <label>Inspection</label>
      <input id=inspectDate readonly>
      <!-- <label>Appraisel</label>
      <input id=appraiseDate readonly> -->
      <label>Finance Contingincy</label>
      <input id="financeDate" readonly>
      <label>Fin Cont Waived - L112</label>
      <input id="finConDate" readonly>
      <label>Title Evidence Due</label>
      <input id="titleEvidDue" readonly>
      <label>Other</label>
      <input id="otherDate1" readonly>


    </div>
    <footer>

<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>

  <script>
    var localAvailable;
    $("#execDate").datepicker();
    $("#closeDate").datepicker();
    if (typeof(Storage) !== "undefined") {
      localAvailable = true;
    } else {
      localAvailable = false;
      // set message to indicate not available
    }

    function processForm() {
      var execDate = document.getElementById("execDate").value;
      var closeDate = document.getElementById("closeDate").value;
      // alert("dates picked are " + date1 + "  and  " + closeDate);
      dateDif();

      // newDate = daystoDate(execDate,document.getElementById("escrowDays").value);
      // document.getElementById("escrowDate").value = newDate.toDateString();
      // newDate = daystoDate(execDate,document.getElementById("inspectDays").value);
      // document.getElementById("inspectDate").value = newDate.toDateString();

      newDate = (new Date(execDate));
      document.getElementById("execOut").value = newDate.toDateString();
      newDate = (new Date(closeDate)).toDateString();
      document.getElementById("closeOut").value = newDate;
      var wd = newDate.split(/[\s+]/);
      if (wd[0] == "Sun" ||
        wd[0] == "Sat") {
        document.getElementById("closeOut").style.background = "pink";

      }

      daystoDate2("execDate", "escrowDays", "escrowDate");
      daystoDate2("execDate", "inspectDays", "inspectDate");
      // daystoDate2("execDate", "daysAppraisel", "appraiseDate");
      daystoDate2("execDate", "daysFinance", "financeDate");

      daystoDate2("execDate", "otherDays", "otherDate1");
      daystoDate2("closeDate", "daysTitleEvid", "titleEvidDue");

      newDate = (daystoDate(closeDate, "-7")).toDateString();
      document.getElementById("finConDate").value = newDate;
      wd = newDate.split(/[\s+]/);
      if (wd[0] == "Sun" ||
        wd[0] == "Sat") {
        document.getElementById("finConDate").style.background = "pink";

      }


    }

    function dateDif() {
      var execDate = new Date(document.getElementById("execDate").value);
      var closeDate = new Date(document.getElementById("closeDate").value);
      var oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
      // var firstDate = new Date(2008,01,12);
      // var secondDate = new Date(2008,01,22);

      var diffDays = Math.round(Math.abs((closeDate.getTime() - execDate.getTime()) / (oneDay)));
      document.getElementById("numDays").value = diffDays;
      // alert(diffDays);
    }

    function daystoDate(date, days) {
      // body...
      var newdate = new Date(date);
      newdate.setDate(parseInt(newdate.getDate()) + parseInt(days));
      var nd = new Date(newdate);
      return nd;

    }

    function daystoDate2(dateField, daysField, outputField) {
      // body...
      var newdate = new Date(document.getElementById(dateField).value);
      var days = document.getElementById(daysField).value;
      newdate.setDate(parseInt(newdate.getDate()) + parseInt(days));
      var nd = (new Date(newdate)).toDateString();
      document.getElementById(outputField).value = nd;
      var wd = nd.split(/[\s+]/);
      if (wd[0] == "Sun" ||
        wd[0] == "Sat") {
        document.getElementById(outputField).style.background = "pink";

      }




      return nd;
    }
  </script>
  <!-- <script src="js/scripts.js"></script> -->
  <script>
    // put inline javascript here
  </script>
</body>

</html>
